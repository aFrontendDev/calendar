<!DOCTYPE html>
<html>

	<head>
		<style>

		.calendar-week {
			float: left;
			clear: left;
			border-bottom: solid 1px #fff;
		}

		.calendar-day {
			float: left;
			width: 50px;
			height: 30px;
			background-color: #B7B1B1;
			border-right: solid 1px #fff;
		}

		.calendar-day-empty {
			background-color: #A09E9E;

		}
		</style>
	</head>

	<body>

		<div class="calendar-container"></div>

		<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
		<script src="handlebars-v4.0.2.js"></script>

		<script>
			function getUrlParams(parameter) {
				var queryString = window.location.search;

				if (queryString !== undefined) {
					queryString = window.location.search.replace('?', '');

					var params = {},
						queryStringArray = queryString.split('&');

					for (var index in queryStringArray) {
						var query = queryStringArray[index].split('=');

						params[decodeURIComponent(query[0])] = decodeURIComponent(query[1]);
					}

					if (parameter) {
						return params[parameter];
					} else {
						return params;
					}
				}
			}
			$(document).on('ready', function () {
				var month = getUrlParams('month');
				var year = getUrlParams('year');

				console.log(month);
				console.log(year);

				$.ajax({
					url: 'monthjson.php',
					type: 'POST',
					data: {
						month: month,
						year: year
					},
					dataType: "json",
					success: function ($data) {
						console.log('success');
						console.log($data);
						createCalendar($data);
					},
					error: function (error) {
						console.log('error');
						console.log(error);
					}
				});
			});

			Handlebars.registerHelper('ifCond', function(v1, v2, options) {
				if(v1 === v2) {
					return options.fn(this);
				}
				return options.inverse(this);
			});

			function createCalendar ($data) {
				var reqTemplate = null,
					calendarTemplate = 'calendar.hbs',
					calendarTemplateHTML = null,
					$calendarContainer = $('.calendar-container');

				reqTemplate = $.get(calendarTemplate, function(view) {
					// Create view from template and data
					calendarTemplateHTML = view;
				});

				$.when(reqTemplate).done(function() {

					var template = Handlebars.compile(calendarTemplateHTML),
						data = template($data),
						html = $calendarContainer.append(data);
				});
			}


		</script>
	</body>
</html>